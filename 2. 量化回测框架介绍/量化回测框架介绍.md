##### 2. 量化回测框架介绍
###### 2.1 回测框架介绍
**➢ 基础回测框架**

Zipline是一个Pythonic算法交易库，这是一个支持回测和现场交易的事件驱动系统。目前，Zipline被用于生产后测和实时交易引擎，为Quantopian提供动力。是一个免费的，以社区为中性的托管平台。Zipline本身只支持美国的证券，如果我们用需要改很多东西。

**➢ 云端的框架**
- 提供部分满足需求的数据（但是平台数据质量不行，指标不完整）
- 策略运行在远端服务器

**➢ 不去实现一个回测框架的原因**
- 没有完整的股票行情和基本面数据
- 回测平台是载体，<font color='red'>**重点在于快速验证策略**</font>
- 证券投资机构各自使用回测框架不同，没有通用的框架

**➢ RiceQuant回测平台介绍**
![在这里插入图片描述](https://img-blog.csdnimg.cn/2019123115030981.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RoYW5sb24=,size_16,color_FFFFFF,t_70)
###### 2.2 策略创建运行的流程
**➢ 一个完整的策略需要做的事情**
- 选择策略的运行信息：选择运行区间和初始资金，选择回测频率，选择股票池
- 编写策略的逻辑：获取股票行情、基本面数据
- 分析结果：策略指标分析

**➢ 策略初始设置**
- 基础设置：指定回测的<font color='red'>**起止日期、初始资金和回测频率。**</font>起止日期是策略运行的时间区间；初始资金是用于投资的总资金；回测的频率有两种选择，日回测和分钟回测（对于市场中性，判断周期可能更长，一个月等）。<font color='red'>**做股票量化选择日回测即可**</font>。
- 高级设置：略

**➢ 策略主体运行流程分析**
- 在<font color='red'>**init**</font>函数中实现<font color='red'>**策略初始化逻辑**</font>，策略的股票池：在哪些股票中进行交易判断（例如：HS300）
- 可以选择在<font color='red'>**before_trading**</font>函数进行一些<font color='red'>**每日开盘之前的操作**</font>，比如获取历史行情做一些数据预处理，获取当前账户资金等。
- 在<font color='red'>**handle_bar**</font>函数中实现策略具体逻辑，<font color='red'>**包括交易信号的产生、订单的创建**</font>。handle_bar内的逻辑会在每次bar数据更新的时候被触发。

>**运行顺序：在运行策略时首先运行init函数，但只运行一次。before_trading和handle_bar函数每日都会被调用，每日交易之前首先运行before_trading，然后再运行handle_bar函数进行每日的交易的判断。**

